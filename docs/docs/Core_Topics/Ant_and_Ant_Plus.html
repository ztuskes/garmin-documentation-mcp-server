<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2025"><meta name="DC.rights.owner" content="(C) Copyright 2025"><meta name="DC.type" content="topic"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="ant-and-ant"><link rel="stylesheet" type="text/css" href="../../branding/commonltr.css"><link rel="stylesheet" type="text/css" href="../../branding/style.css"><title>ANT and ANT+</title></head><body id="ant-and-ant"><header role="banner"><div>
<link href="../../resources/programmers-guide/google-code-prettify/prettify.css" type="text/css" rel="stylesheet">
<script src="../../resources/programmers-guide/jquery-1.11.3.min.js"></script>
<script>
    $(document).ready( function() {
        $( 'pre' ).addClass( 'prettyprint' );
    } );
</script>
<script src="../../resources/programmers-guide/google-code-prettify/run_prettify.js"></script>
</div></header><nav role="toc"><ul><li><a href="../../docs/Readme/Intro.html">Introduction</a></li><li><a href="../../docs/Connect_IQ_Basics/Welcome_to_the_Jungle.html">Welcome to Connect IQ</a></li><li><a href="../../docs/Monkey_C/Basic_Syntax.html">Hello Monkey C!</a></li><li><a href="../../docs/Core_Topics/Overview.html">Core Topics</a><ul><li><a href="../../docs/Core_Topics/Manifest_and_Permissions.html">Manifest File and Permissions</a></li><li><a href="../../docs/Core_Topics/Application_and_System_Modules.html">Application and System Modules</a></li><li><a href="../../docs/Core_Topics/Persisting_Data.html">Persisting Data</a></li><li><a href="../../docs/Core_Topics/Backgrounding.html">Background Services</a></li><li><a href="../../docs/Core_Topics/Glances.html">Glances</a></li><li><a href="../../docs/Core_Topics/Properties_and_App_Settings.html">Properties and Settings</a></li><li><a href="../../docs/Core_Topics/Intents.html">Intents</a></li><li><a href="../../docs/Core_Topics/Notifications.html">Notifications</a></li><li><a href="../../docs/Core_Topics/Build_Configuration.html">Build Configuration</a></li><li><a href="../../docs/Core_Topics/Security.html">Security</a></li><li><a href="../../docs/Core_Topics/User_Interface.html">Views, Drawables and Layers</a></li><li><a href="../../docs/Core_Topics/Layouts.html">Layouts</a></li><li><a href="../../docs/Core_Topics/Graphics.html">Graphics</a></li><li><a href="../../docs/Core_Topics/Input_Handling.html">Input Handling</a></li><li><a href="../../docs/Core_Topics/Native_Controls.html">Native UI Controls</a></li><li><a href="../../docs/Core_Topics/Resources.html">Resources</a></li><li><a href="../../docs/Core_Topics/Monkey_Style.html">Monkey Style</a></li><li><a href="../../docs/Core_Topics/Getting_the_Users_Attention.html">Getting the User's Attention</a></li><li><a href="../../docs/Core_Topics/Editing_Watch_Faces_On_Device.html">Watch Face Configurations</a></li><li><a href="../../docs/Core_Topics/HTTPS.html">JSON REST Requests</a></li><li><a href="../../docs/Core_Topics/Authenticated_Web_Services.html">Authenticated Web Services</a></li><li><a href="../../docs/Core_Topics/Communicating_with_Mobile_Apps.html">Communicating with Mobile Apps</a></li><li><a href="../../docs/Core_Topics/Downloading_Content.html">Downloading Content</a></li><li><a href="../../docs/Core_Topics/Mobile_SDK_for_Android.html">Mobile SDK for Android</a></li><li><a href="../../docs/Core_Topics/Mobile_SDK_for_iOS.html">Mobile SDK for iOS</a></li><li class="active"><a href="../../docs/Core_Topics/Ant_and_Ant_Plus.html">ANT and ANT+</a></li><li><a href="../../docs/Core_Topics/Bluetooth_Low_Energy.html">Getting Started with Connect IQ BLE Development</a></li><li><a href="../../docs/Core_Topics/Pairing_Wireless_Devices.html">Sensor Pairing</a></li><li><a href="../../docs/Core_Topics/Sensors.html">Sensors</a></li><li><a href="../../docs/Core_Topics/Positioning.html">Positioning</a></li><li><a href="../../docs/Core_Topics/Activity_Recording.html">Activity Recording</a></li><li><a href="../../docs/Core_Topics/Quantifying_the_User.html">Quantifying User Information</a></li><li><a href="../../docs/Core_Topics/Complications.html">Complications</a></li><li><a href="../../docs/Core_Topics/Shareable_Libraries.html">Shareable Libraries</a></li><li><a href="../../docs/Core_Topics/Debugging.html">Testing and Debugging</a></li><li><a href="../../docs/Core_Topics/Unit_Testing.html">Unit Testing</a></li><li><a href="../../docs/Core_Topics/Exception_Reporting_Tool.html">Error Reporting Application (ERA)</a></li><li><a href="../../docs/Core_Topics/Profiling.html">Profiling Applications</a></li><li><a href="../../docs/Core_Topics/Publishing_to_the_Store.html">Publishing to the Connect IQ Store</a></li><li><a href="../../docs/Core_Topics/Beta_Apps.html">Beta Apps</a></li><li><a href="../../docs/Core_Topics/Trial_Apps.html">App Trials</a></li><li><a href="../../docs/Core_Topics/Requesting_Reviews.html">Requesting Reviews</a></li></ul></li><li><a href="../../docs/User_Experience_Guidelines/Overview.html">User Experience Guidelines</a></li><li><a href="../../docs/Personality_Library/Personality_UI.html">Personality UI</a></li><li><a href="../../docs/Connect_IQ_FAQ/Overview.html">Connect IQ FAQ</a></li><li><a href="../../docs/Reference_Guides/Overview.html">Reference Guides</a></li><li><a href="../../docs/App_Review_Guidelines/Overview.html">Garmin Connect IQ App Review Guidelines</a></li><li><a href="../../docs/Monetization/Overview.html">Connect IQ Monetization System</a></li><li><a href="../../docs/Device_Reference/Overview.html">Device Reference</a></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">ANT and ANT+</h1><div class="body"><p class="p">The Sensor module of Connect IQ gives developers access to the built-in and paired sensors of the device. Connect IQ also provides access to the available ANT channels as well. This allows developers to communicate with sensors not supported by Garmin. Using the FIT recording system those metrics can be recorded to the Activity file and uploaded to Garmin Connect.</p><p class="p">Learn more about ANT and ANT+ at <a class="xref" href="http://thisisant.com" target="_blank">thisisant.com</a></p><table class="table"><caption></caption><colgroup><col><col><col></colgroup><thead class="thead"><tr class="row"><th class="entry" id="ant-and-ant__entry__1">API</th><th class="entry" id="ant-and-ant__entry__2">Purpose</th><th class="entry" id="ant-and-ant__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry" headers="ant-and-ant__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Ant.html" target="_blank">Toybox.Ant</a></td><td class="entry" headers="ant-and-ant__entry__2">Provides access to generic ANT channels. These allow direct communication between your app and an ANT device</td><td class="entry" headers="ant-and-ant__entry__3">1.0.0</td></tr><tr class="row"><td class="entry" headers="ant-and-ant__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus.html" target="_blank">Toybox.AntPlus</a></td><td class="entry" headers="ant-and-ant__entry__2">Allows access to ANT devices paired with the device.</td><td class="entry" headers="ant-and-ant__entry__3">2.2.0</td></tr></tbody></table></div><article class="topic nested1" aria-labelledby="ariaid-title2" id="generic-ant-channels"><h2 class="title topictitle2" id="ariaid-title2">Generic ANT Channels</h2><div class="body"><p class="p">Connect IQ provides a low level interface for communication with ANT and ANT+ sensors. With this interface, an ANT channel can be created to send and receive ANT packets.</p><p class="p">With an ANT USB dongle you can use Connect IQ ANT APIs in the Connect IQ Simulator. Note that Garmin Express will block access to the ANT USB dongle if it is running, so make sure to shut down Garmin Express when using the ANT USB dongle with the Connect IQ simulator.</p></div><article class="topic nested2" aria-labelledby="ariaid-title3" id="using-ant-stick-in-linux"><h3 class="title topictitle3" id="ariaid-title3">Using ANT stick in Linux</h3><div class="body"><p class="p">In order to use ANT stick in Linux the usb device should be accessible to the simulator. A udev rule must be installed in the system for the ANT stick to populate with non-root privileges.</p><p class="p">Find the vendor and product id for the ANT stick</p><pre class="pre codeblock bash"><code>$ lsusb</code></pre><p class="p">Identify the ANT stick in the list and its vendor and product id. example:</p><pre class="pre codeblock bash"><code>Bus 001 Device 009: ID 0fcf:1009 Dynastream Innovations, Inc. ANTUSB-m Stick</code></pre><p class="p">Create a udev rule for this device</p><pre class="pre codeblock bash"><code>$ sudo touch /etc/udev/rules.d/50-connectiq-usbant.rules
$ sudo nano /etc/udev/rules.d/50-connectiq-usbant.rules</code></pre><p class="p">Then add the line below to the file and save the changes: CTRL-x</p><pre class="pre codeblock bash"><code>ACTION=="add", SUBSYSTEMS=="usb", ATTRS{idVendor}=="0fcf", ATTRS{idProduct}=="1009", MODE="664", GROUP="plugdev"</code></pre><p class="p">Restart the udev service and plug the ANT stick</p><pre class="pre codeblock bash"><code>$ sudo /etc/init.d/udev restart</code></pre><p class="p">Add yourself to the 'plugdev' group</p><pre class="pre codeblock bash"><code>$ sudo usermod -a -G plugdev &lt;userName&gt;</code></pre></div></article></article><article class="topic nested1" aria-labelledby="ariaid-title4" id="communicating-with-a-tempe-sensor"><h2 class="title topictitle2" id="ariaid-title4">Communicating with a Tempe Sensor</h2><div class="body"><p class="p">The Environment Profile is supported by sensors like the Garmin tempeâ„¢ wireless environment sensor and makes it possible to read the minimum, maximum and current temperature.</p><p class="p">We can initialize an ANT channel to a tempe sensor with the following:</p><pre class="pre codeblock typescript"><code>    // Constructor
    function initialize() {
        // Get the channel
        chanAssign = new Ant.ChannelAssignment(
            Ant.CHANNEL_TYPE_RX_NOT_TX,
            Ant.NETWORK_PLUS);
        GenericChannel.initialize(method(:onMessage), chanAssign);

        // Set the configuration
        deviceCfg = new Ant.DeviceConfig( {
            :deviceNumber =&gt; 0,                 //Wildcard our search
            :deviceType =&gt; DEVICE_TYPE,
            :transmissionType =&gt; 0,
            :messagePeriod =&gt; PERIOD,
            :radioFrequency =&gt; 57,              //Ant+ Frequency
            :searchTimeoutLowPriority =&gt; 10,    //Timeout in 25s
            :searchTimeoutHighPriority =&gt; 2,    //Timeout in 5s
            :searchThreshold =&gt; 0} );           //Pair to all transmitting sensors
        GenericChannel.setDeviceConfig(deviceCfg);

        data = new TempeData();
        searching = true;
    }
</code></pre><p class="p">This code sets up the ANT channel assignment and sets device config and passes them to the base <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Ant/GenericChannel.html" target="_blank">Ant.GenericChannel</a> class. The device config is set to wildcard search to find any environment sensor. The initializer also sets up the <code class="ph codeph">onMessage</code> callback to handle incoming packets.</p><pre class="pre codeblock typescript"><code>    // Handle incoming information
    function onMessage(msg as Message) {
        // Parse the payload
        var payload = msg.getPayload();

        if( Ant.MSG_ID_BROADCAST_DATA == msg.messageId ) {
            if( TempeDataPage.PAGE_NUMBER == (payload[0].toNumber() &amp; 0xFF) ) {
                // Were we searching?
                if(searching) {
                    searching = false;

                    // Update our device configuration primarily to see
                    // the device number of the sensor we paired to
                    deviceCfg = GenericChannel.getDeviceConfig();
                }
                var dp = new TempeDataPage();
                dp.parse( msg.getPayload(), data );
                tempDataAvailable = true;
                // Check if the data has changed and we need to update the ui
                if( pastEventCount != data.eventCount ) {
                    pastEventCount = data.eventCount;
                }
            }
        } // end broadcast data

        else if( Ant.MSG_ID_CHANNEL_RESPONSE_EVENT == msg.messageId ) {
            if( Ant.MSG_ID_RF_EVENT == (payload[0] &amp; 0xFF) ) {
                if( Ant.MSG_CODE_EVENT_CHANNEL_CLOSED == (payload[1] &amp; 0xFF) ) {
                    open();
                }
                else if( Ant.MSG_CODE_EVENT_RX_FAIL_GO_TO_SEARCH  == (payload[1] &amp; 0xFF) ) {
                    searching = true;
                }
            }
            else{
                //It is a channel response.
            }
        } // end channel response event

    } // end on message
</code></pre><p class="p">The callback handles pairing with a nearby sensor, and handing incoming packets.</p><p class="p">The MO2Display sample provides a sample application that implements the Muscle Oxygen ANT profile. The ANT Generic interface is not available to watch faces. Low and high priority search timeout for sensors differs from the basic ANT radio specification to allow for interoperation with native ANT behavior on devices.  These are limited to a maximum timeout of 30 seconds and 5 seconds respectively.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title5" id="burst-data"><h2 class="title topictitle2" id="ariaid-title5">Burst Data</h2><div class="body"><p class="p"><em class="ph i">Since API level 2.2.0</em></p><p class="p">Burst data transmission provides a mechanism for large amounts of data to be sent between devices over an ANT Generic Channel. Developers are notified through a listener of the success/failure of burst transmit/receive events. Burst data transmission is limited to up to 8Kb of data at a time.</p><p class="p">Common use cases for this include passkey authentication or sending/receiving configuration data between devices.</p><p class="p">The <code class="ph codeph">GenericChannelBurst</code> sample provides a demonstration of transmitting and receiving burst data.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title6" id="ant-profiles"><h2 class="title topictitle2" id="ariaid-title6">ANT+ Profiles</h2><div class="body"><p class="p"><em class="ph i">Since API level 2.2.0</em></p><p class="p">The <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus.html" target="_blank">Toybox.AntPlus</a> module allows access to information about ANT+ sensors that are paired to a user's device without requiring you to set up and manage the ANT channel yourself. All management of ANT+ sensors such as adding, removing, enabling, disabling, and calibrating is managed by the user via the device's regular sensor menus.</p><p class="p">An extension of a sensor-specific listener is passed into the constructor for a sensor-specific extension of <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus/Device.html" target="_blank">AntPlus.Device</a>. If there is a sensor of the given type paired to the user's device, information about that sensor can be retrieved using the sensor-specific getters, or through the common data getters such as <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus/Device.html#getBatteryStatus-instance_function" target="_blank">Device.getBatteryStatus()</a>. <code class="ph codeph">null</code> can be passed in as the identifier for sensor types (like most) that do not support multi-components.</p><p class="p">Callbacks in the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus/DeviceListener.html" target="_blank">AntPlus.DeviceListener</a> and extensions of it will be called automatically if a sensor of the given type is paired and the corresponding information is updated via ANT. For example, <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus/DeviceListener.html#onDeviceStateUpdate-instance_function" target="_blank">DeviceListener.onDeviceStateUpdate()</a> will be called if a sensor's ANT channel goes from connected to searching, or if the user switches the sensor ID of a given type that their device is connected to. Callbacks like <span class="xref"></span> will be called when new pieces of information about a power sensor are received via ANT.</p><p class="p">Certain ANT+ sensors, such as bike lights, have special callbacks. For example, the <span class="xref"></span>  callback should be used to understand the light network's state rather than <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus/DeviceListener.html#onDeviceStateUpdate-instance_function" target="_blank">DeviceListener.onDeviceStateUpdate()</a>. The <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/AntPlus/LightNetwork.html" target="_blank">AntPlus.LightNetwork</a> class will allow you to make changes to bike light modes, given there are bike lights paired to the user's device and a light network is fully formed.</p><p class="p">Not all ANT+ profiles provisioned by Monkey C will be supported by every Connect IQ-compatible device.</p></div></article></article></main><footer role="contentinfo"><div>
<p class="disclaimer">
Connect IQ System None API 8.2.3 Documentation. Copyright 2025 Garmin International. All Rights Reserved.
</p>
</div></footer></body></html>