<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2025"><meta name="DC.rights.owner" content="(C) Copyright 2025"><meta name="DC.type" content="topic"><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="sensor-pairing"><link rel="stylesheet" type="text/css" href="../../branding/commonltr.css"><link rel="stylesheet" type="text/css" href="../../branding/style.css"><title>Sensor Pairing</title></head><body id="sensor-pairing"><header role="banner"><div>
<link href="../../resources/programmers-guide/google-code-prettify/prettify.css" type="text/css" rel="stylesheet">
<script src="../../resources/programmers-guide/jquery-1.11.3.min.js"></script>
<script>
    $(document).ready( function() {
        $( 'pre' ).addClass( 'prettyprint' );
    } );
</script>
<script src="../../resources/programmers-guide/google-code-prettify/run_prettify.js"></script>
</div></header><nav role="toc"><ul><li><a href="../../docs/Readme/Intro.html">Introduction</a></li><li><a href="../../docs/Connect_IQ_Basics/Welcome_to_the_Jungle.html">Welcome to Connect IQ</a></li><li><a href="../../docs/Monkey_C/Basic_Syntax.html">Hello Monkey C!</a></li><li><a href="../../docs/Core_Topics/Overview.html">Core Topics</a><ul><li><a href="../../docs/Core_Topics/Manifest_and_Permissions.html">Manifest File and Permissions</a></li><li><a href="../../docs/Core_Topics/Application_and_System_Modules.html">Application and System Modules</a></li><li><a href="../../docs/Core_Topics/Persisting_Data.html">Persisting Data</a></li><li><a href="../../docs/Core_Topics/Backgrounding.html">Background Services</a></li><li><a href="../../docs/Core_Topics/Glances.html">Glances</a></li><li><a href="../../docs/Core_Topics/Properties_and_App_Settings.html">Properties and Settings</a></li><li><a href="../../docs/Core_Topics/Intents.html">Intents</a></li><li><a href="../../docs/Core_Topics/Notifications.html">Notifications</a></li><li><a href="../../docs/Core_Topics/Build_Configuration.html">Build Configuration</a></li><li><a href="../../docs/Core_Topics/Security.html">Security</a></li><li><a href="../../docs/Core_Topics/User_Interface.html">Views, Drawables and Layers</a></li><li><a href="../../docs/Core_Topics/Layouts.html">Layouts</a></li><li><a href="../../docs/Core_Topics/Graphics.html">Graphics</a></li><li><a href="../../docs/Core_Topics/Input_Handling.html">Input Handling</a></li><li><a href="../../docs/Core_Topics/Native_Controls.html">Native UI Controls</a></li><li><a href="../../docs/Core_Topics/Resources.html">Resources</a></li><li><a href="../../docs/Core_Topics/Monkey_Style.html">Monkey Style</a></li><li><a href="../../docs/Core_Topics/Getting_the_Users_Attention.html">Getting the User's Attention</a></li><li><a href="../../docs/Core_Topics/Editing_Watch_Faces_On_Device.html">Watch Face Configurations</a></li><li><a href="../../docs/Core_Topics/HTTPS.html">JSON REST Requests</a></li><li><a href="../../docs/Core_Topics/Authenticated_Web_Services.html">Authenticated Web Services</a></li><li><a href="../../docs/Core_Topics/Communicating_with_Mobile_Apps.html">Communicating with Mobile Apps</a></li><li><a href="../../docs/Core_Topics/Downloading_Content.html">Downloading Content</a></li><li><a href="../../docs/Core_Topics/Mobile_SDK_for_Android.html">Mobile SDK for Android</a></li><li><a href="../../docs/Core_Topics/Mobile_SDK_for_iOS.html">Mobile SDK for iOS</a></li><li><a href="../../docs/Core_Topics/Ant_and_Ant_Plus.html">ANT and ANT+</a></li><li><a href="../../docs/Core_Topics/Bluetooth_Low_Energy.html">Getting Started with Connect IQ BLE Development</a></li><li class="active"><a href="../../docs/Core_Topics/Pairing_Wireless_Devices.html">Sensor Pairing</a></li><li><a href="../../docs/Core_Topics/Sensors.html">Sensors</a></li><li><a href="../../docs/Core_Topics/Positioning.html">Positioning</a></li><li><a href="../../docs/Core_Topics/Activity_Recording.html">Activity Recording</a></li><li><a href="../../docs/Core_Topics/Quantifying_the_User.html">Quantifying User Information</a></li><li><a href="../../docs/Core_Topics/Complications.html">Complications</a></li><li><a href="../../docs/Core_Topics/Shareable_Libraries.html">Shareable Libraries</a></li><li><a href="../../docs/Core_Topics/Debugging.html">Testing and Debugging</a></li><li><a href="../../docs/Core_Topics/Unit_Testing.html">Unit Testing</a></li><li><a href="../../docs/Core_Topics/Exception_Reporting_Tool.html">Error Reporting Application (ERA)</a></li><li><a href="../../docs/Core_Topics/Profiling.html">Profiling Applications</a></li><li><a href="../../docs/Core_Topics/Publishing_to_the_Store.html">Publishing to the Connect IQ Store</a></li><li><a href="../../docs/Core_Topics/Beta_Apps.html">Beta Apps</a></li><li><a href="../../docs/Core_Topics/Trial_Apps.html">App Trials</a></li><li><a href="../../docs/Core_Topics/Requesting_Reviews.html">Requesting Reviews</a></li></ul></li><li><a href="../../docs/User_Experience_Guidelines/Overview.html">User Experience Guidelines</a></li><li><a href="../../docs/Personality_Library/Personality_UI.html">Personality UI</a></li><li><a href="../../docs/Connect_IQ_FAQ/Overview.html">Connect IQ FAQ</a></li><li><a href="../../docs/Reference_Guides/Overview.html">Reference Guides</a></li><li><a href="../../docs/App_Review_Guidelines/Overview.html">Garmin Connect IQ App Review Guidelines</a></li><li><a href="../../docs/Monetization/Overview.html">Connect IQ Monetization System</a></li><li><a href="../../docs/Device_Reference/Overview.html">Device Reference</a></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Sensor Pairing</h1><div class="body"><p class="p"><em class="ph i">Since API level 5.1.0</em></p><p class="p">If your device application or data field communicates wirelessly with a sensor or peripheral using ANT, ANT plus or Bluetooth Low Energy (BLE), then you will need to implement a pairing process. Connect IQ allows you to implement a <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a> that allows you to have your device pair as part of the device’s sensor paring UI flow.</p></div><article class="topic nested1" aria-labelledby="ariaid-title2" id="implementing-a-sensordelegate"><h2 class="title topictitle2" id="ariaid-title2">Implementing a SensorDelegate</h2><div class="body"><p class="p">For the system to know that your device application or data field supports the native pairing flow, you will need your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getSensorDelegate-instance_function" target="_blank">AppBase.getSensorDelegate()</a> to return your implementation of your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a>. In your delegate, your implementation of <span class="xref"></span> must return <code class="ph codeph">true</code> to participate in a scan.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title3" id="scanning-for-your-device"><h2 class="title topictitle2" id="ariaid-title3">Scanning for Your Device</h2><div class="body"><p class="p">When the user has the device scan for sensors, the system will start your app without a UI, request your sensor delegate and call your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onScan-instance_function" target="_blank">SensorDelegate.onScan()</a>. During this time, you can begin scanning for ANT or BLE devices.</p><p class="p">If your scan reveals any devices, populate a Sensor.SensorInfo with the information and call Sensor.notifyNewSensor() for each device you detect. When your scan is complete, call <span class="xref"></span> to inform the system that you are done scanning. Since other apps also may need to scan for devices, use a realistic timeout, and notify quickly if no devices are detected.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title4" id="pairing-a-device"><h2 class="title topictitle2" id="ariaid-title4">Pairing a Device</h2><div class="body"><p class="p">The user will be presented with a list of devices to choose from. If a device associated with your app is selected, your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a> will be re-instantiated, and the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onPair-instance_function" target="_blank">SensorDelegate.onPair()</a> will be called with the <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorInfo.html" target="_blank">Sensor.SensorInfo</a> passed as a parameter. At this point, your app should do the necessary steps to pair the device. On ANT, this could be as simple as capturing the device id and persisting it, or with BLE it could involve persisting the ScanResult or establishing a bonded connection. Call <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyPairComplete-instance_function" target="_blank">Sensor.notifyPairComplete()</a> to complete the process.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title5" id="unpairing-a-device"><h2 class="title topictitle2" id="ariaid-title5">Unpairing a Device</h2><div class="body"><p class="p">Once your device is paired, it can be managed in the device Sensors list. The user can request that the system unpair from a device, as well. When requested, your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onUnpair-instance_function" target="_blank">SensorDelegate.onUnpair()</a> will be invoked. Do the necessary cleanup and call <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyUnpairComplete-instance_function" target="_blank">Sensor.notifyUnpairComplete()</a> to complete the process.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title6" id="pairing-with-your-data-field-or-application"><h2 class="title topictitle2" id="ariaid-title6">Pairing with Your Data Field or Application</h2><div class="body"><p class="p">If you add support for the native pairing flow, users will be prompted to pair with your sensor when the data field is installed. Applications typically want to pair devices as part of a setup flow. You can use <code class="ph codeph">System.exitTo(new Intent("system://pairing", {}))</code> to exit the user to the native sensor scanning process.</p></div></article><article class="topic nested1" aria-labelledby="ariaid-title7" id="testing-in-the-simulator"><h2 class="title topictitle2" id="ariaid-title7">Testing in the Simulator</h2><div class="body"><p class="p">If you’d like to test your pairing code in the Connect IQ simulator, use the <em class="ph i">Settings &gt; Manage Sensors</em> option. Using the <em class="ph i">Add</em> button will trigger your <a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html" target="_blank">Sensor.SensorDelegate</a>.</p><table class="table"><caption></caption><colgroup><col><col><col></colgroup><thead class="thead"><tr class="row"><th class="entry align-left" id="testing-in-the-simulator__entry__1">API</th><th class="entry align-left" id="testing-in-the-simulator__entry__2">Description</th><th class="entry align-center" id="testing-in-the-simulator__entry__3">API Level</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Application/AppBase.html#getSensorDelegate-instance_function" target="_blank">AppBase.getSensorDelegate()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Returns the implementation of a sensor delegate. Implement this method to communicate your app supports the native pairing flow.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onScan-instance_function" target="_blank">SensorDelegate.onScan()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Scan for devices supported by your app.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onPair-instance_function" target="_blank">SensorDelegate.onPair()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Complete the pairing process for a specific device.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor/SensorDelegate.html#onUnpair-instance_function" target="_blank">SensorDelegate.onUnpair()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Unpair a specific device from your app.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><span class="xref"></span></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Tell the system your app has completed a scan.</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyPairComplete-instance_function" target="_blank">Sensor.notifyPairComplete()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Tell the system your app has completed pairing a device</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr><tr class="row"><td class="entry align-left" headers="testing-in-the-simulator__entry__1"><a class="xref" href="https://developer.garmin.com/connect-iq/api-docs/Toybox/Sensor.html#notifyUnpairComplete-instance_function" target="_blank">Sensor.notifyUnpairComplete()</a></td><td class="entry align-left" headers="testing-in-the-simulator__entry__2">Tell the system your app has completed unpairing a device</td><td class="entry align-center" headers="testing-in-the-simulator__entry__3">5.1.0</td></tr></tbody></table></div></article></article></main><footer role="contentinfo"><div>
<p class="disclaimer">
Connect IQ System None API 8.2.3 Documentation. Copyright 2025 Garmin International. All Rights Reserved.
</p>
</div></footer></body></html>